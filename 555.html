<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>æ‰«ç ç§»è½¦ç³»ç»Ÿ - è½¦ç‰ŒæŸ¥è¯¢</title>
    
    <!-- æŒ‰é¡ºåºåŠ è½½è„šæœ¬ -->
    <script src="data.js" charset="UTF-8"></script>
    <script src="css.js" charset="UTF-8"></script>
    <script src="query.js" charset="UTF-8"></script>
</head>
<body>
    <main class="card">
        <h1 class="title">æ‰«ç ç§»è½¦ç³»ç»Ÿ</h1>
        <p class="subtitle">è¾“å…¥è½¦ç‰Œå·æŸ¥è¯¢è½¦ä¸»è”ç³»æ–¹å¼</p>
        
        <div class="input-section">
            <div class="input-group">
                <input type="text" 
                       id="plateInput" 
                       class="plate-input" 
                       placeholder="è¯·è¾“å…¥è½¦ç‰Œå·ï¼Œå¦‚ï¼šA123B4" 
                       maxlength="10"
                       autofocus>
                <button type="button" class="btn-query" onclick="queryPhoneNumber()">æŸ¥è¯¢</button>
            </div>
            <p class="hint">æç¤ºï¼šè¯·è¾“å…¥å®Œæ•´çš„è½¦ç‰Œå·ï¼Œç³»ç»Ÿä¸åŒºåˆ†å¤§å°å†™</p>
            
            <div class="error-message" id="errorMessage">
                æœªæ‰¾åˆ°è¯¥è½¦ç‰Œå·ï¼Œè¯·æ£€æŸ¥è¾“å…¥æ˜¯å¦æ­£ç¡®
            </div>
            
            <div class="sample-plates">
                <div class="sample-title">ç¤ºä¾‹è½¦ç‰Œï¼š</div>
                <div class="sample-list" id="sampleList">
                    <!-- ç¤ºä¾‹è½¦ç‰Œå°†ç”±query.jsåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <div class="result-section" id="resultSection">
            <div class="result-title">æŸ¥è¯¢ç»“æœ</div>
            <div class="license-plate" id="resultPlate"></div>
            <p class="subtitle">ä¸´æ—¶åœè½¦å¯¹æ‚¨é€ æˆçš„ä¸ä¾¿æ·±è¡¨æ­‰æ„ï¼Œè¯·æ‹¨æ‰“ç”µè¯</p>
            
            <nav class="contact-group" id="contactGroup">
                <!-- ç”µè¯æŒ‰é’®å°†ç”±query.jsåŠ¨æ€ç”Ÿæˆ -->
            </nav>
        </div>
        
        <div class="footer-links">
            <a href="javascript:void(0);" class="footer-link" onclick="alert('å¦‚éœ€æ·»åŠ æˆ–ä¿®æ”¹è½¦è¾†ä¿¡æ¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ã€‚')">ç®¡ç†è½¦è¾†ä¿¡æ¯</a>
            <a href="javascript:void(0);" class="footer-link" onclick="alert('æœ¬ç³»ç»Ÿç”¨äºä¸´æ—¶åœè½¦æ—¶è”ç³»è½¦ä¸»ç§»è½¦ï¼Œè¯·å‹¿æ»¥ç”¨ã€‚')">ä½¿ç”¨è¯´æ˜</a>
            <p class="info-text">æ‹¨æ‰“ç”µè¯å‰è¯·ç¡®è®¤è½¦ç‰Œå·ï¼Œå¹¶ç¤¼è²Œæ²Ÿé€š</p>
        </div>
    </main>
    
    <script>
        // æŸ¥è¯¢å‡½æ•° - è°ƒç”¨query.jsä¸­çš„åŠŸèƒ½
        function queryPhoneNumber() {
            const plateInput = document.getElementById('plateInput');
            const plate = plateInput.value.trim().toUpperCase();
            
            if (!plate) {
                showError('è¯·è¾“å…¥è½¦ç‰Œå·');
                return;
            }
            
            // è°ƒç”¨query.jsä¸­çš„æŸ¥è¯¢åŠŸèƒ½
            if (typeof window.queryPhoneNumbers === 'function') {
                const phoneNumbers = window.queryPhoneNumbers(plate);
                displayResults(plate, phoneNumbers);
            } else {
                showError('æŸ¥è¯¢åŠŸèƒ½æœªæ­£ç¡®åŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
            }
        }
        
        // æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ
        function displayResults(plate, phoneNumbers) {
            const errorMessage = document.getElementById('errorMessage');
            const resultSection = document.getElementById('resultSection');
            const resultPlate = document.getElementById('resultPlate');
            const contactGroup = document.getElementById('contactGroup');
            
            // éšè—é”™è¯¯ä¿¡æ¯
            errorMessage.style.display = 'none';
            
            if (!phoneNumbers || phoneNumbers[0] === 'ç”µè¯æœªç™»è®°') {
                showError('æœªæ‰¾åˆ°è¯¥è½¦ç‰Œå·ï¼Œè¯·æ£€æŸ¥è¾“å…¥æ˜¯å¦æ­£ç¡®');
                resultSection.style.display = 'none';
                return;
            }
            
            // æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ
            resultPlate.textContent = plate;
            
            // æ¸…ç©ºå¹¶é‡æ–°ç”Ÿæˆç”µè¯æŒ‰é’®
            contactGroup.innerHTML = '';
            phoneNumbers.forEach((phone, index) => {
                const phoneLink = document.createElement('a');
                phoneLink.href = `tel:${phone}`;
                phoneLink.className = 'btn-call';
                phoneLink.textContent = phoneNumbers.length > 1 
                    ? `ğŸ“ æ‹¨æ‰“è½¦ä¸»ç”µè¯ ${index + 1} (${phone})` 
                    : `ğŸ“ æ‹¨æ‰“è½¦ä¸»ç”µè¯ (${phone})`;
                
                contactGroup.appendChild(phoneLink);
            });
            
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            resultSection.style.display = 'block';
            
            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            errorMessage.style.animation = 'none';
            setTimeout(() => {
                errorMessage.style.animation = 'shake 0.5s ease';
            }, 10);
        }
        
        // æŒ‰Enteré”®è§¦å‘æŸ¥è¯¢
        document.getElementById('plateInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                queryPhoneNumber();
            }
        });
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–ç¤ºä¾‹è½¦ç‰Œ
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof phoneData !== 'undefined') {
                const sampleList = document.getElementById('sampleList');
                const samplePlates = Object.keys(phoneData).slice(0, 4); // å–å‰4ä¸ªè½¦ç‰Œä½œä¸ºç¤ºä¾‹
                
                samplePlates.forEach(plate => {
                    const span = document.createElement('span');
                    span.className = 'sample-plate';
                    span.textContent = plate;
                    span.onclick = function() {
                        document.getElementById('plateInput').value = plate;
                        queryPhoneNumber();
                    };
                    sampleList.appendChild(span);
                });
            }
        });
    </script>
</body>
</html>